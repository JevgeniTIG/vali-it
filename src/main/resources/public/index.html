<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MyTestPage</title>

</head>
<body>
    <img src="mrb_header.jpg" width="1200" height="120">
    <h5>
    </h5>
<form>
    <!Creates customer>
    <input type="text" id="firstName" placeholder="First Name">
    <input type="text" id="lastName" placeholder="Last Name">
    <input type="button" id="createCustomerButton" value="Register customer">
</form>
    <h5>
    </h5>
<form>
    <!Creates account>
    <input type="text" id="account" placeholder="Account Number">
    <input type="text" id="balance" placeholder="Balance">
    <input type="text" id="customerId" placeholder="Customer ID">
    <input type="button" id="createAccountButton" value="Register account">
</form>
    <h5>
    </h5>
<form>
    <!Gets balance of specified account>
    <input type="text" id="yourBalance" placeholder="Account Number">
    <input type="button" id="getBalance" value="Show Balance">
    <input type="text" id="yourBalanceOutput"></input>
</form>
    <h5>
    </h5>
<form>
    <!Deposits money to specified account>
    <input type="text" id="receiverAccount" placeholder="Account Number">
    <input type="text" id="amountToDeposit" placeholder="Amount">
    <input type="button" id="depositButton" value="Deposit">
</form>
    <h5>
    </h5>
<form>
    <!Withdraws money from specified account>
    <input type="text" id="payerAccount" placeholder="Account Number">
    <input type="text" id="amountToWithdraw" placeholder="Amount">
    <input type="button" id="withdrawButton" value="Withdraw">
</form>
    <h5>
    </h5>
<form>
    <!Transfers money between accounts>
    <input type="text" id="accountFrom" placeholder="Payer's account">
    <input type="text" id="accountTo" placeholder="Receiver's account">
    <input type="text" id="amountToTransfer" placeholder="Amount">
    <input type="button" id="transferButton" value="Transfer">
</form>
    <h5>
    </h5>
<form>
    <!Shows account balance>
    <input type="text" id="accountId" placeholder="Account ID">
    <input type="button" id="statementButton" value="Show Statement">
    <span id="yourStatementOutput"></span>
</form>
</body>

<script>

    // Creates new customer
    let registerButton = document.getElementById("createCustomerButton")
    registerButton.addEventListener('click', function createCustomer() {

        fetch('/enter_new_customer_efficient', {
            method: 'POST',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					firstName: firstName.value,
					lastName: lastName.value

				})
            })

        .then(function (response) {
            registerButton.value = 'Customer registered';
            firstName.value = ' ';
            lastName.value = ' ';
        })

        .catch(function (err) {
            registerButton.value = 'Something went wrong';
        });

    });

    // Creates new account
    let registerAccountButton = document.getElementById("createAccountButton")
    registerAccountButton.addEventListener('click', function createAccount() {

        fetch('/enter_new_account_efficient', {
            method: 'POST',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					account: account.value,
					balance: balance.value,
					customerId: customerId.value

				})
            })

        .then(function (response) {
            registerAccountButton.value = 'Account created';
            account.value = ' ';
            balance.value = ' ';
            customerId.value = ' ';
        })

        .catch(function (err) {
            registerAccountButton.value = 'Something went wrong';
        });

    });

    // Gets balance of specified account
    let submitButton = document.getElementById("getBalance")
    submitButton.addEventListener('click', function getBalance() {

        fetch('/getbalance_efficient', {
            method: 'POST',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					account: yourBalance.value,

				})
            })

        .then(function (response) {
            return response.json();
        })
        .then(function (jsonData) {
            yourBalanceOutput.value = jsonData;

        })
        .catch(function (err) {
            yourBalanceOutput.value = 'You are trying to access classified data';
        });

    });

    // Deposits money to specified account
    let depositButton = document.getElementById("depositButton")
    depositButton.addEventListener('click', function depositAccount() {

        fetch('/deposit_efficient', {
            method: 'PUT',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					account: receiverAccount.value,
					amount: amountToDeposit.value

				})
            })

        .then(function (response) {
            depositButton.value = 'Transaction complete';
            receiverAccount.value = ' ';
            amountToDeposit.value = ' ';
        })


        .catch(function (err) {
            depositButton.value = 'You are trying to access classified data';
        });

    });

    // Withdraws money from specified account
    let withdrawButton = document.getElementById("withdrawButton")
    withdrawButton.addEventListener('click', function withdrawAccount() {

        fetch('/withdraw_efficient', {
            method: 'PUT',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					account: payerAccount.value,
					amount: amountToWithdraw.value

				})
            })

        .then(function (response) {
            withdrawButton.value = 'Transaction complete';
            payerAccount.value = ' ';
            amountToWithdraw.value = ' ';
        })


        .catch(function (err) {
            withdrawButton.value = 'You are trying to access classified data';
        });

    });


    // Transfers money between accounts
    let transferButton = document.getElementById("transferButton")
    transferButton.addEventListener('click', function transferAccount() {

        fetch('/transfer_efficient', {
            method: 'PUT',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					accountFrom: accountFrom.value,
					accountTo: accountTo.value,
					amount: amountToTransfer.value

				})
            })

        .then(function (response) {
            transferButton.value = 'Transaction complete';
            accountFrom.value = ' ';
            accountTo.value = ' ';
            amountToTransfer.value = ' ';
        })

        .catch(function (err) {
            transferButton.value = 'You are trying to access classified data';
        });

    });


// Shows account statement
    let statementButton = document.getElementById("showStatement")
    statementButton.addEventListener('click', function showStatement() {

        fetch('/showstatement_efficient', {
            method: 'POST',
            cache: 'no-cache',
            headers: {
                'Content-Type': 'application/json'
            },
				body: JSON.stringify({
					accountId: accountId.value,

				})
            })

        .then(function (response) {
            return response.json();
        })
        .then(function (jsonData) {
            yourStatementOutput.value = jsonData;

        })
        .catch(function (err) {
            yourStatementOutput.value = 'You are trying to access classified data';
        });

    });





</script>
</html>